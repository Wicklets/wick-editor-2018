<script>

var getFunctionBody = function (fn) {
	var fnString = fn.toString().match(/function[^{]+\{([\s\S]*)\}$/)[1];
	return fnString;
}

var fnString = " \
var whoCares = 'this is outside the functions lol :O'; \n\
\n\
console.log('holy moly')\n\
this.setup = function () { \n\
	console.log('its setup lol'); \n\
	var x = 100; \n\
	var y = x * x; \n\
	return y; \n\
} \n\
this.update = function () { \n\
	doSomethingLol(); \n\
}";

console.log(fnString)
eval(fnString)
console.log(this.update)
console.log(this.update.toString().match(/function[^{]+\{([\s\S]*)\}$/)[1]);

</script>